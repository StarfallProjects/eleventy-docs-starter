<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eleventy Documentation Starters</title>
    <meta name="Description" content="A collection of Eleventy starters for creating documentation sites.">
    <meta name="Keywords" content="test">
    
        <link href="/css/prism/a11y-dark.css" rel="stylesheet">
      
    
        <link rel="stylesheet" type="text/css" href="/css/plain.css" />
      
  </head>
  
<body>
<main>
<h1></h1>


<h1>Conditional outputs</h1>
<p>Conditional outputs allow you to change how you output your content depending on certain variables. For example, you might want to mark some of your content as <code>draft</code>, and make sure it's only included in test builds, not in builds for the live site.</p>
<h2>Quickstart</h2>
<pre class="language-js"><code class="language-js"><span class="token comment">// `_data/utils.js`</span><br>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token string">'output'</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">OUTPUT</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<pre class="language-js"><code class="language-js"><span class="token comment">// `index.md`</span><br><br><span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">if</span> utils<span class="token punctuation">.</span>output <span class="token operator">==</span> <span class="token string">"draft"</span> <span class="token operator">%</span><span class="token punctuation">}</span><br>Draft text<br><span class="token punctuation">{</span><span class="token operator">%</span> endif <span class="token operator">%</span><span class="token punctuation">}</span><br></code></pre>
<p>Then build the output with:</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># Bash shell</span><br><br><span class="token comment"># include the draft content</span><br><span class="token assign-left variable">OUTPUT</span><span class="token operator">=</span>draft npx @Eleventy/eleventy<br><br><span class="token comment"># exclude the draft content</span><br>npx @Eleventy/eleventy</code></pre>
<pre class="language-powershell"><code class="language-powershell"><span class="token comment"># PowerShell</span><br><br><span class="token comment"># include the draft content</span><br><span class="token variable">$env</span>:OUTPUT=<span class="token string">"draft"</span><span class="token punctuation">;</span> npx @Eleventy<span class="token operator">/</span>eleventy<span class="token punctuation">;</span> <span class="token variable">$env</span>:OUTPUT=<span class="token variable">$null</span><br><br><span class="token comment"># exclude the draft content</span><br>npx @Eleventy<span class="token operator">/</span>eleventy</code></pre>
<pre class="language-json"><code class="language-json"><span class="token comment">// In your package.json</span><br><br><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"npm run dev"</span><span class="token punctuation">,</span><br>    <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"cross-env ELEVENTY_ENV=draft eleventy --serve"</span><span class="token punctuation">,</span><br>    <span class="token property">"prod"</span><span class="token operator">:</span> <span class="token string">"cross-env ELEVENTY_ENV=prod eleventy --serve"</span><span class="token punctuation">,</span><br>    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"cross-env ELEVENTY_ENV=prod eleventy"</span><span class="token punctuation">,</span><br>    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre>
<h2>Explanation</h2>
<p>Eleventy allows us to pass environment variables to our templates using Node.js' <code>process.env</code> property. <a href="https://www.11ty.dev/docs/data-js/#example-exposing-environment-variables">Eleventy docs example</a>.</p>
<p>This may sound complicated. What it means is:</p>
<ul>
<li>You need a data file listing your environment variables.</li>
<li>You set those variables in the CLI (command line interface) when you build the site, or in your <code>scripts</code> in your <code>package.json</code>.</li>
<li>Your templates can check for those variables and take action based on the values.</li>
</ul>
<p>In the example above, we:</p>
<ol>
<li>Create an environment variable named <code>OUTPUT</code> in the <code>_data/utils.js</code> file.</li>
<li>Check the value of the variable in the <code>index.md</code> file.</li>
<li>If the value of the variable is <code>draft</code>, we show the draft content.</li>
<li>Build the site, setting the value of <code>OUTPUT</code> to <code>draft</code>.</li>
</ol>
<h3>Why is OUTPUT capitalized?</h3>
<p>It's a common style convention for environment variables.</p>
<h3>What's going on with PowerShell?</h3>
<p>The Eleventy documentation shows how to set environment variables in a Bash shell (or CLI). In PowerShell it's more complicated. There is a detailed explanation in <a href="https://stackoverflow.com/a/43030126/2291838">this StackOverflow answer</a>.</p>
<p>The PowerShell command:</p>
<ol>
<li>Sets the environment variable <em>before</em> running the Eleventy build.</li>
<li>Runs the Eleventy build.</li>
<li>Clears the environment variable.</li>
</ol>
<p>If you use an npm script (for example, <code>npm run draft</code>) to build your site, I recommend using <a href="https://www.npmjs.com/package/cross-env">cross-env</a> to avoid PowerShell-related quirks.</p>
<h3>Can I still use flags like <code>--serve</code> or <code>--output</code>?</h3>
<p>Yes. For example, the following overwrites the default output directory, <code>docs</code>, and puts the output into <code>docs/draft</code>. This allows you to have several output folders. You could have one for live, one for draft, and so on.</p>
<pre class="language-shell"><code class="language-shell"><span class="token comment"># Bash</span><br><span class="token assign-left variable">OUTPUT</span><span class="token operator">=</span>draft npx @Eleventy/eleventy --output<span class="token operator">=</span>docs/draft<br><br><span class="token comment"># PowerShell</span><br><span class="token variable">$env</span>:OUTPUT<span class="token operator">=</span><span class="token string">"draft"</span><span class="token punctuation">;</span> npx @Eleventy/eleventy --output<span class="token operator">=</span>docs/draft<span class="token punctuation">;</span> <span class="token variable">$env</span>:OUTPUT<span class="token operator">=</span><span class="token variable">$null</span></code></pre>
<blockquote>
<p><strong>Warning:</strong> in PowerShell, if you run it with the <code>--serve</code> flag, it will never run <code>$env:OUTPUT=$null</code>. The <code>$env:OUTPUT</code> variable will keep the value you set until you manually unset it or close PowerShell.</p>
</blockquote>


</main>

<script src="/js/main.js"></script>
</body>